<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Configuración de caracteres y título de la página -->
    <meta charset="UTF-8">
    <title>Clima en Tiempo Real</title>
</head>
<body>
    <!-- Título principal de la página -->
    <h1>Clima en Tiempo Real</h1>
    
    <!-- Campo de texto para ingresar el nombre de la ciudad -->
    <input type="text" id="ciudad" placeholder="Escribe una ciudad">
    
    <!-- Botón para obtener el pronóstico del clima -->
    <!-- El evento onclick llama a la función obtenerPronostico() cuando se hace clic -->
    <button onclick="obtenerPronostico()">Ver Pronóstico 5 días</button>

    <!-- Sección donde se mostrarán los resultados del pronóstico -->
    <div id="resultado"></div>

<script>
    // Función asíncrona para obtener el pronóstico del clima
    async function obtenerPronostico() {
        // Obtener el nombre de la ciudad del input
        const ciudad = document.getElementById("ciudad").value;
        // Obtener el contenedor donde se mostrarán los resultados
        const resultado = document.getElementById("resultado");

        try {
            // Realizar una solicitud fetch para obtener los datos del pronóstico
            const response = await fetch(`https://localhost:7129/api/clima/pronostico/${ciudad}`);
            // Convertir la respuesta en formato JSON
            const data = await response.json();

            // Crear una variable HTML para mostrar los resultados
            let html = `<h2>Pronóstico para ${ciudad}</h2>`;
            
            // Recorrer los primeros 5 elementos de la lista de pronósticos
            data.list.slice(0, 5).forEach(item => {
                // Agregar cada pronóstico al HTML generado
                html += `
                    <p>${item.dt_txt} → ${item.main.temp} °C, ${item.weather[0].description}</p>
                `;
            });

            // Insertar el HTML generado en el contenedor de resultados
            resultado.innerHTML = html;
        } catch (error) {
            // Si ocurre un error, mostrar un mensaje en el contenedor de resultados
            resultado.innerHTML = "Error al obtener el pronóstico.";
            // Mostrar el error en la consola para ayudar en la depuración
            console.error(error);
        }
    }
</script>
</body>
</html>
